<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>函数分析可视化</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#8B5CF6',
                        dark: '#1E293B',
                        light: '#F8FAFC',
                        math: '#06B6D4'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                        mono: ['Consolas', 'Monaco', 'monospace']
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .shadow-card {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }
            .transition-smooth {
                transition: all 0.3s ease-in-out;
            }
            .hover-scale {
                transition: transform 0.2s;
            }
            .hover-scale:hover {
                transform: scale(1.02);
            }
            .math-display {
                font-family: 'mono', monospace;
                color: #06B6D4;
                background-color: rgba(6, 182, 212, 0.05);
                padding: 0.25rem 0.5rem;
                border-radius: 0.25rem;
                display: inline-block;
            }
        }
    </style>
</head>
<body class="font-inter bg-light text-dark min-h-screen flex flex-col">
    <!-- 导航栏 -->
    <header class="bg-white shadow-md sticky top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-calculator text-primary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold text-dark">函数分析可视化</h1>
            </div>
            <nav class="hidden md:flex space-x-6">
                <a href="#analysis" class="text-dark hover:text-primary transition-smooth font-medium">问题分析</a>
                <a href="#solution" class="text-dark hover:text-primary transition-smooth font-medium">详细解答</a>
                <a href="#visualization" class="text-dark hover:text-primary transition-smooth font-medium">可视化</a>
                <a href="#summary" class="text-dark hover:text-primary transition-smooth font-medium">总结</a>
            </nav>
            <button class="md:hidden text-dark text-xl">
                <i class="fa fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- 介绍部分 -->
        <section class="mb-12 text-center">
            <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">商品销售利润问题分析</h2>
            <p class="text-gray-600 max-w-2xl mx-auto text-lg">
                分析商品价格调整对销量和利润的影响，通过数学模型找到最优销售策略。
            </p>
        </section>

        <!-- 问题分析 -->
        <section id="analysis" class="mb-12">
            <div class="bg-white rounded-xl shadow-card p-6 md:p-8 hover-scale">
                <h3 class="text-xl font-semibold text-dark mb-6 flex items-center">
                    <i class="fa fa-search text-primary mr-2"></i>
                    问题分析
                </h3>
                <p class="text-gray-700 mb-4">
                    本题主要涉及一次函数和二次函数在实际问题中的应用。商品进价为40元，原售价为60元时每月可销售300件。售价每涨1元，每月少卖10件；售价每降1元，每月多卖20件。
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                    <div class="bg-primary/5 rounded-lg p-4">
                        <h4 class="font-medium text-primary mb-2 flex items-center">
                            <i class="fa fa-list-ol text-primary mr-2"></i>
                            问题（1）
                        </h4>
                        <p class="text-gray-600 text-sm">
                            求销量 \( y \) 与价格调整量 \( x \) 之间的函数关系式及自变量 \( x \) 的取值范围。
                        </p>
                    </div>
                    <div class="bg-primary/5 rounded-lg p-4">
                        <h4 class="font-medium text-primary mb-2 flex items-center">
                            <i class="fa fa-line-chart text-primary mr-2"></i>
                            问题（2）
                        </h4>
                        <p class="text-gray-600 text-sm">
                            求使月利润最大的销售价格及最大月利润。
                        </p>
                    </div>
                    <div class="bg-primary/5 rounded-lg p-4">
                        <h4 class="font-medium text-primary mb-2 flex items-center">
                            <i class="fa fa-tags text-primary mr-2"></i>
                            问题（3）
                        </h4>
                        <p class="text-gray-600 text-sm">
                            求每月利润为6000元时的销售价格。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 详细解答 -->
        <section id="solution" class="mb-12">
            <div class="bg-white rounded-xl shadow-card p-6 md:p-8 hover-scale">
                <h3 class="text-xl font-semibold text-dark mb-6 flex items-center">
                    <i class="fa fa-calculator text-primary mr-2"></i>
                    详细解答
                </h3>
                
                <!-- 问题1 -->
                <div class="mb-8">
                    <h4 class="text-lg font-semibold text-dark mb-4 flex items-center">
                        <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                        求 \( y \) 与 \( x \) 之间的函数关系式及自变量 \( x \) 的取值范围
                    </h4>
                    <div class="space-y-4">
                        <p class="text-gray-700">
                            <strong>当 \( x > 0 \)（售价上涨）时：</strong>
                            售价每涨1元，每月少卖10件。原本售价为60元时可卖300件，现在售价为 \( (60 + x) \) 元，则销量 \( y = 300 - 10x \)。
                            因为销量不能为负数，所以 \( 300 - 10x \geqslant 0 \)，解这个不等式：
                        </p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="math-display">
                                \( 300 - 10x \geqslant 0 \)
                            </p>
                            <p class="math-display">
                                移项得到 \( 10x \leqslant 300 \)，即 \( x \leqslant 30 \)。
                            </p>
                            <p class="math-display">
                                所以当 \( x > 0 \) 时，\( y = 300 - 10x \, (0 < x \leqslant 30) \)。
                            </p>
                        </div>
                        
                        <p class="text-gray-700">
                            <strong>当 \( x < 0 \)（售价下降）时：</strong>
                            售价每降1元，每月多卖20件。则销量 \( y = 300 + 20x \)。
                            同样因为销量不能为负数，所以 \( 300 + 20x \geqslant 0 \)，解这个不等式：
                        </p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="math-display">
                                \( 300 + 20x \geqslant 0 \)
                            </p>
                            <p class="math-display">
                                移项得到 \( 20x \geqslant -300 \)，即 \( x \geqslant -15 \)。
                            </p>
                            <p class="math-display">
                                所以当 \( x < 0 \) 时，\( y = 300 + 20x \, (-15 \leqslant x < 0) \)。
                            </p>
                        </div>
                        
                        <p class="text-gray-700">
                            <strong>综上：</strong>
                        </p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="math-display">
                                \( y = \begin{cases} 
                                    300 - 10x & (0 < x \leqslant 30) \\
                                    300 + 20x & (-15 \leqslant x < 0) 
                                \end{cases} \)
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- 问题2 -->
                <div class="mb-8">
                    <h4 class="text-lg font-semibold text-dark mb-4 flex items-center">
                        <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                        求使月利润最大的销售价格及最大月利润
                    </h4>
                    <div class="space-y-4">
                        <p class="text-gray-700">
                            利润 \( w = (60 + x - 40)y \)。
                        </p>
                        
                        <p class="text-gray-700">
                            <strong>当 \( 0 < x \leqslant 30 \) 时：</strong>
                            \( w = (20 + x)(300 - 10x) = -10x^2 + 100x + 6000 \)。
                        </p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="math-display">
                                对于二次函数 \( w = -10x^2 + 100x + 6000 \)，其二次项系数 \( a = -10 < 0 \)，图象开口向下，对称轴为 \( x = -\frac{b}{2a} = -\frac{100}{2 \times (-10)} = 5 \)。
                            </p>
                            <p class="math-display">
                                所以当 \( x = 5 \) 时，\( w \) 有最大值，\( w = -10 \times 5^2 + 100 \times 5 + 6000 = -250 + 500 + 6000 = 6250 \)，此时销售价格为 \( 60 + 5 = 65 \) 元。
                            </p>
                        </div>
                        
                        <p class="text-gray-700">
                            <strong>当 \( -15 \leqslant x < 0 \) 时：</strong>
                            \( w = (20 + x)(300 + 20x) = 20x^2 + 700x + 6000 \)。
                        </p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="math-display">
                                对于二次函数 \( w = 20x^2 + 700x + 6000 \)，其二次项系数 \( a = 20 > 0 \)，图象开口向上，对称轴为 \( x = -\frac{b}{2a} = -\frac{700}{2 \times 20} = -\frac{35}{2} = -17.5 \)。
                            </p>
                            <p class="math-display">
                                因为 \( -15 \leqslant x < 0 \)，在这个区间内 \( w \) 随 \( x \) 的增大而增大，所以当 \( x \) 趋近于 0 时，\( w \) 趋近于最大值 \( (20 + 0) \times (300 + 20 \times 0) = 6000 \) 元。
                            </p>
                        </div>
                        
                        <p class="text-gray-700">
                            <strong>比较两种情况：</strong>
                            \( 6250 > 6000 \)。所以当销售价格为 65 元时，月利润最大，最大月利润为 6250 元。
                        </p>
                    </div>
                </div>
                
                <!-- 问题3 -->
                <div>
                    <h4 class="text-lg font-semibold text-dark mb-4 flex items-center">
                        <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                        求每月利润为6000元时的销售价格
                    </h4>
                    <div class="space-y-4">
                        <p class="text-gray-700">
                            <strong>当 \( 0 < x \leqslant 30 \) 时：</strong>
                            令 \( -10x^2 + 100x + 6000 = 6000 \)。
                        </p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="math-display">
                                移项得到 \( -10x^2 + 100x = 0 \)，提取公因式 \( -10x \) 得 \( -10x(x - 10) = 0 \)，解得 \( x_1 = 0 \)，\( x_2 = 10 \)。
                            </p>
                            <p class="math-display">
                                此时销售价格为 \( 60 + 0 = 60 \) 元或 \( 60 + 10 = 70 \) 元。
                            </p>
                        </div>
                        
                        <p class="text-gray-700">
                            <strong>当 \( -15 \leqslant x < 0 \) 时：</strong>
                            令 \( 20x^2 + 700x + 6000 = 6000 \)。
                        </p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="math-display">
                                移项得到 \( 20x^2 + 700x = 0 \)，提取公因式 \( 20x \) 得 \( 20x(x + 35) = 0 \)，解得 \( x_3 = 0 \)（舍去），\( x_4 = -35 \)（舍去）。
                            </p>
                            <p class="math-display">
                                所以在此区间无解。
                            </p>
                        </div>
                        
                        <p class="text-gray-700">
                            <strong>综上：</strong>
                            销售价格为 60 元或 70 元时，每月利润为 6000 元。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 可视化部分 -->
        <section id="visualization" class="mb-12">
            <div class="bg-white rounded-xl shadow-card p-6 md:p-8 hover-scale">
                <h3 class="text-xl font-semibold text-dark mb-6 flex items-center">
                    <i class="fa fa-area-chart text-primary mr-2"></i>
                    函数可视化
                </h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- 图表区域 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="font-medium text-primary mb-4">销量与价格调整关系图</h4>
                        <div class="relative h-[300px]">
                            <canvas id="sales-chart"></canvas>
                        </div>
                    </div>
                    
                    <!-- 利润图表区域 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="font-medium text-primary mb-4">利润与价格调整关系图</h4>
                        <div class="relative h-[300px]">
                            <canvas id="profit-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- 交互控制区域 -->
                <div class="mt-8">
                    <h4 class="font-medium text-primary mb-4">参数控制</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <label for="price-adjustment" class="block text-sm font-medium text-gray-700">价格调整量 \( x \)（元）</label>
                            <div class="flex items-center space-x-3">
                                <input type="range" id="price-adjustment" min="-15" max="30" step="1" value="0" 
                                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
                                <span id="price-adjustment-value" class="text-sm font-medium text-primary min-w-[3rem] text-center">0</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <label for="current-price" class="block text-sm font-medium text-gray-700">当前售价（元）</label>
                            <div class="flex items-center space-x-3">
                                <input type="number" id="current-price" min="45" max="90" step="1" value="60" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 rounded-lg p-4">
                            <h5 class="font-medium text-blue-600 mb-1">销量</h5>
                            <p id="current-sales" class="text-xl font-bold text-blue-700">300 件</p>
                        </div>
                        <div class="bg-green-50 rounded-lg p-4">
                            <h5 class="font-medium text-green-600 mb-1">单件利润</h5>
                            <p id="profit-per-item" class="text-xl font-bold text-green-700">20 元</p>
                        </div>
                        <div class="bg-purple-50 rounded-lg p-4">
                            <h5 class="font-medium text-purple-600 mb-1">总利润</h5>
                            <p id="total-profit" class="text-xl font-bold text-purple-700">6000 元</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 总结部分 -->
        <section id="summary" class="mb-12">
            <div class="bg-white rounded-xl shadow-card p-6 md:p-8 hover-scale">
                <h3 class="text-xl font-semibold text-dark mb-6 flex items-center">
                    <i class="fa fa-bookmark text-primary mr-2"></i>
                    总结
                </h3>
                
                <div class="space-y-4">
                    <div class="bg-primary/5 rounded-lg p-4">
                        <h4 class="font-medium text-primary mb-2">销量函数</h4>
                        <p class="math-display">
                            \( y = \begin{cases} 
                                300 - 10x & (0 < x \leqslant 30) \\
                                300 + 20x & (-15 \leqslant x < 0) 
                            \end{cases} \)
                        </p>
                        <p class="text-gray-600 text-sm mt-2">
                            其中 \( x \) 为价格调整量，正数表示涨价，负数表示降价。
                        </p>
                    </div>
                    
                    <div class="bg-secondary/5 rounded-lg p-4">
                        <h4 class="font-medium text-secondary mb-2">最大利润</h4>
                        <p class="math-display">
                            当销售价格为 65 元时，月利润最大，最大月利润为 6250 元。
                        </p>
                        <p class="text-gray-600 text-sm mt-2">
                            此时价格调整量 \( x = 5 \) 元，销量 \( y = 250 \) 件，单件利润 25 元。
                        </p>
                    </div>
                    
                    <div class="bg-accent/5 rounded-lg p-4">
                        <h4 class="font-medium text-accent mb-2">目标利润价格</h4>
                        <p class="math-display">
                            销售价格为 60 元或 70 元时，每月利润为 6000 元。
                        </p>
                        <p class="text-gray-600 text-sm mt-2">
                            当售价为 60 元时，销量为 300 件；当售价为 70 元时，销量为 200 件。
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fa fa-calculator text-primary mr-2"></i>
                        函数分析可视化
                    </h3>
                    <p class="text-gray-400">
                        一个帮助理解数学函数在实际问题中应用的交互式工具。
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">功能</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-primary transition-smooth">问题分析</a></li>
                        <li><a href="#" class="hover:text-primary transition-smooth">详细解答</a></li>
                        <li><a href="#" class="hover:text-primary transition-smooth">函数可视化</a></li>
                        <li><a href="#" class="hover:text-primary transition-smooth">参数交互</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">关于</h3>
                    <p class="text-gray-400">
                        本工具专为教育目的设计，适合学生和教师使用。如有任何问题或建议，请联系我们。
                    </p>
                    <div class="mt-4 flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-primary transition-smooth">
                            <i class="fa fa-github text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-primary transition-smooth">
                            <i class="fa fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-primary transition-smooth">
                            <i class="fa fa-envelope text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-6 text-center text-gray-500">
                <p>&copy; 2025 函数分析可视化 | 保留所有权利</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // 初始化图表
        let salesChart, profitChart;
        let priceAdjustment = 0;
        
        // 计算销量
        function calculateSales(x) {
            if (x > 0) {
                return Math.max(0, 300 - 10 * x);
            } else {
                return Math.max(0, 300 + 20 * x);
            }
        }
        
        // 计算利润
        function calculateProfit(x) {
            const sales = calculateSales(x);
            const price = 60 + x;
            const cost = 40;
            return (price - cost) * sales;
        }
        
        // 更新显示值
        function updateDisplayValues(x) {
            const sales = calculateSales(x);
            const price = 60 + x;
            const profitPerItem = price - 40;
            const totalProfit = calculateProfit(x);
            
            document.getElementById('price-adjustment-value').textContent = x;
            document.getElementById('current-price').value = price;
            document.getElementById('current-sales').textContent = `${sales} 件`;
            document.getElementById('profit-per-item').textContent = `${profitPerItem} 元`;
            document.getElementById('total-profit').textContent = `${totalProfit} 元`;
            
            // 更新图表中的标记点
            if (salesChart) {
                salesChart.data.datasets[1].data[0] = { x, y: sales };
                salesChart.update();
            }
            
            if (profitChart) {
                profitChart.data.datasets[1].data[0] = { x, y: totalProfit };
                profitChart.update();
            }
        }
        
        // 初始化图表
        function initCharts() {
            // 销量图表
            const salesCtx = document.getElementById('sales-chart').getContext('2d');
            const salesData = [];
            for (let x = -15; x <= 30; x++) {
                salesData.push({ x, y: calculateSales(x) });
            }
            
            salesChart = new Chart(salesCtx, {
                type: 'line',
                data: {
                    datasets: [
                        {
                            label: '销量函数',
                            data: salesData,
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false,
                            tension: 0.1
                        },
                        {
                            label: '当前点',
                            data: [{ x: 0, y: calculateSales(0) }],
                            backgroundColor: '#EF4444',
                            borderColor: '#EF4444',
                            borderWidth: 2,
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 300
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: '价格调整量 x (元)'
                            },
                            min: -15,
                            max: 30,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: '销量 y (件)'
                            },
                            min: 0,
                            max: 600,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const x = context.parsed.x;
                                    const y = context.parsed.y;
                                    return `x = ${x} 元, y = ${y} 件`;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false
                    }
                }
            });
            
            // 利润图表
            const profitCtx = document.getElementById('profit-chart').getContext('2d');
            const profitData = [];
            for (let x = -15; x <= 30; x++) {
                profitData.push({ x, y: calculateProfit(x) });
            }
            
            profitChart = new Chart(profitCtx, {
                type: 'line',
                data: {
                    datasets: [
                        {
                            label: '利润函数',
                            data: profitData,
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false,
                            tension: 0.1
                        },
                        {
                            label: '当前点',
                            data: [{ x: 0, y: calculateProfit(0) }],
                            backgroundColor: '#EF4444',
                            borderColor: '#EF4444',
                            borderWidth: 2,
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 300
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: '价格调整量 x (元)'
                            },
                            min: -15,
                            max: 30,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: '利润 w (元)'
                            },
                            min: 0,
                            max: 7000,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const x = context.parsed.x;
                                    const y = context.parsed.y;
                                    return `x = ${x} 元, w = ${y} 元`;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false
                    }
                }
            });
        }
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化图表
            initCharts();
            
            // 设置价格调整滑块
            const priceAdjustmentSlider = document.getElementById('price-adjustment');
            priceAdjustmentSlider.addEventListener('input', function() {
                priceAdjustment = parseInt(this.value);
                updateDisplayValues(priceAdjustment);
            });
            
            // 设置当前价格输入
            const currentPriceInput = document.getElementById('current-price');
            currentPriceInput.addEventListener('change', function() {
                const price = parseInt(this.value);
                priceAdjustment = price - 60;
                
                // 确保价格调整量在有效范围内
                if (priceAdjustment < -15) {
                    priceAdjustment = -15;
                    this.value = 45;
                } else if (priceAdjustment > 30) {
                    priceAdjustment = 30;
                    this.value = 90;
                }
                
                priceAdjustmentSlider.value = priceAdjustment;
                updateDisplayValues(priceAdjustment);
            });
            
            // 初始化显示值
            updateDisplayValues(priceAdjustment);
            
            // 平滑滚动
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,